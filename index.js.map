{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"48661661-399e17c2888aa32e2cfb6a652\";\n\nexport const fetchImages = async (query, page = 1) => {\n  try {\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: 40, \n      },\n    });\n\n    return {\n      images: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error(\"Error fetching images: \", error.response?.data || error.message);\n    throw new Error(\"Unable to fetch images.\");  \n  }\n};\n\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.getElementById(\"gallery\");\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst scrollToNewImages = () => {\n  const galleryCards = document.querySelectorAll(\".gallery-card\");\n\n  if (galleryCards.length > 0) {\n    const cardHeight = galleryCards[0].getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2, \n      behavior: \"smooth\", \n    });\n  }\n};\n\nexport const renderImages = (images) => {\n  if (images.length === 0) {\n    showNoResultsMessage();\n    return;\n  }\n\n  gallery.innerHTML += images.map(image => `\n    <div class=\"gallery-card\">\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\">\n      </a>\n      <div class=\"image-info\">\n        <p><strong>Likes:</strong> ${image.likes}</p>\n        <p><strong>Views:</strong> ${image.views}</p>\n        <p><strong>Comments:</strong> ${image.comments}</p>\n        <p><strong>Downloads:</strong> ${image.downloads}</p>\n      </div>\n    </div>\n  `).join('');\n\n  lightbox.refresh();\n  scrollToNewImages();\n};\n\nexport const showNoResultsMessage = () => {\n  iziToast.error({\n    message: \"Sorry, there are no images matching your search query. Please try again!\",\n    position: \"topRight\",\n    backgroundColor: `#ef4040`,\n    onOpening: function () {\n      const toastElement = document.querySelector('.iziToast');\n      if (toastElement) {\n        toastElement.style.borderBottom = '2px solid #ffbebe';\n        toastElement.style.borderRadius = '4px';\n        toastElement.style.padding = '20px';\n        toastElement.style.width = '432px';\n        toastElement.style.height = '88px';\n      }\n    }\n  });\n};\n\nexport const showErrorMessage = (message) => {\n  iziToast.error({\n    title: \"Error\",\n    message: message,\n    position: \"topRight\",\n  });\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showErrorMessage, showNoResultsMessage } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchForm = document.getElementById(\"search-form\");\nconst searchInput = document.getElementById(\"search-input\");\nconst searchButton = document.querySelector(\"button\");\nconst gallery = document.getElementById(\"gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.getElementById(\"load-more-btn\");\n\nlet currentPage = 1;\nlet currentQuery = \"\";\nlet totalHits = 0; \n\nsearchForm.classList.add(\"search-form\");\nsearchInput.classList.add(\"search-input\");\nsearchButton.classList.add(\"search-button\");\ngallery.classList.add(\"gallery\");\n\nsearchForm.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n\n  const query = searchInput.value.trim();\n  if (!query) {\n    showErrorMessage(\"Please enter a search term.\");\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  totalHits = 0; \n\n  gallery.innerHTML = \"\";\n  loadMoreBtn.style.display = \"none\"; \n  loader.style.display = \"block\"; \n\n  try {\n    const { images, totalHits: total } = await fetchImages(currentQuery, currentPage);\n    totalHits = total; \n\n    if (images.length === 0) {\n      showNoResultsMessage(); \n      return;\n    }\n\n    renderImages(images);\n    \n    if (images.length > 0) {\n      gallery.insertAdjacentElement(\"afterend\", loadMoreBtn);\n      loadMoreBtn.style.display = \"block\";\n    }\n\n    if (totalHits <= 40) {\n      loadMoreBtn.style.display = \"none\";\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n      });\n    }\n  } catch (error) {\n    showErrorMessage(\"Failed to fetch images. Please try again later.\");\n  } finally {\n    loader.style.display = \"none\"; \n  }\n\n  searchInput.value = \"\";\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  currentPage += 1;\n  loadMoreBtn.insertAdjacentElement(\"afterend\", loader);\n  loader.style.display = \"block\"; \n\n  try {\n    const { images, totalHits: total } = await fetchImages(currentQuery, currentPage);\n    totalHits = total;\n\n    if (images.length === 0) {\n      loadMoreBtn.style.display = \"none\";\n      return;\n    }\n\n    renderImages(images);\n\n    const totalLoadedImages = (currentPage - 1) * 40 + images.length;\n\n    if (totalLoadedImages >= totalHits) {\n      loadMoreBtn.style.display = \"none\";\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n      });\n    }\n  } catch (error) {\n    showErrorMessage(\"Failed to fetch more images. Please try again later.\");\n  } finally {\n    loader.style.display = \"none\"; \n  }\n});\n"],"names":["API_KEY","fetchImages","query","page","response","axios","error","_a","gallery","lightbox","SimpleLightbox","scrollToNewImages","galleryCards","cardHeight","renderImages","images","showNoResultsMessage","image","iziToast","toastElement","showErrorMessage","message","searchForm","searchInput","searchButton","loader","loadMoreBtn","currentPage","currentQuery","totalHits","total"],"mappings":"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"}