import{a as w,i as g,S as v}from"./assets/vendor-g5NYb1XI.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const I="48661661-399e17c2888aa32e2cfb6a652",f=async(e,s=1)=>{var n;try{const o=await w.get("https://pixabay.com/api/",{params:{key:I,q:e,image_type:"photo",orientation:"horizontal",safesearch:!0,page:s,per_page:40}});return{images:o.data.hits,totalHits:o.data.totalHits}}catch(o){throw console.error("Error fetching images: ",((n=o.response)==null?void 0:n.data)||o.message),new Error("Unable to fetch images.")}},P=()=>{const e=document.querySelectorAll(".gallery-card");if(e.length>0){const s=e[0].getBoundingClientRect().height;window.scrollBy({top:s*2,behavior:"smooth"})}},b=e=>{const s=document.getElementById("gallery");if(e.length===0){E();return}e.forEach(o=>{const t=document.createElement("div");t.classList.add("gallery-card");const r=document.createElement("a");r.href=o.largeImageURL,r.classList.add("gallery-link");const l=document.createElement("img");l.src=o.webformatURL,l.alt=o.tags,l.classList.add("gallery-image");const m=document.createElement("div");m.classList.add("image-info"),m.innerHTML=`
      <p><strong>Likes:</strong> ${o.likes}</p>
      <p><strong>Views:</strong> ${o.views}</p>
      <p><strong>Comments:</strong> ${o.comments}</p>
      <p><strong>Downloads:</strong> ${o.downloads}</p>
    `,r.appendChild(l),t.appendChild(r),t.appendChild(m),s.appendChild(t)}),new v(".gallery-link",{captionsData:"alt",captionDelay:250}).refresh(),P()},E=()=>{g.error({message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight",backgroundColor:"#ef4040",onOpening:function(){const e=document.querySelector(".iziToast");e&&(e.style.borderBottom="2px solid #ffbebe",e.style.borderRadius="4px",e.style.padding="20px",e.style.width="432px",e.style.height="88px")}})},u=e=>{g.error({title:"Error",message:e,position:"topRight"})},L=document.getElementById("search-form"),y=document.getElementById("search-input"),R=document.querySelector("button"),p=document.getElementById("gallery"),d=document.querySelector(".loader"),i=document.getElementById("load-more-btn");let a=1,h="",c=0;L.classList.add("search-form");y.classList.add("search-input");R.classList.add("search-button");p.classList.add("gallery");L.addEventListener("submit",async e=>{e.preventDefault();const s=y.value.trim();if(!s){u("Please enter a search term.");return}h=s,a=1,c=0,p.innerHTML="",i.style.display="none",d.style.display="block";try{const{images:n,totalHits:o}=await f(h,a);if(c=o,n.length===0){E();return}b(n),n.length>0&&(p.insertAdjacentElement("afterend",i),i.style.display="block"),c<=40&&(i.style.display="none",g.info({message:"We're sorry, but you've reached the end of search results.",position:"topRight"}))}catch{u("Failed to fetch images. Please try again later.")}finally{d.style.display="none"}y.value=""});i.addEventListener("click",async()=>{if(console.log(`Current Page: ${a}, Total Hits: ${c}`),(a-1)*40>=c){console.log("No more images to load."),i.style.display="none",g.info({message:"We're sorry, but you've reached the end of search results.",position:"topRight"});return}a+=1,i.insertAdjacentElement("afterend",d),d.style.display="block";try{console.log(`Fetching images for page ${a}...`);const{images:e,totalHits:s}=await f(h,a);c=s,console.log(`Images received on page ${a}:`,e.length),e.length===0||a*40>=c?(console.log("Reached the end of results."),i.style.display="none",g.info({message:"We're sorry, but you've reached the end of search results.",position:"topRight"})):b(e)}catch(e){console.error("Error fetching more images:",e),u("Failed to fetch more images. Please try again later.")}finally{d.style.display="none"}});
//# sourceMappingURL=index.js.map
